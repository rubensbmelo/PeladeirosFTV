<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="Peladeiros.jpeg" type="image/x-icon">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    <title>Ranking Completo - Peladeiros de Futev√¥lei</title>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-G98PRRLH9V"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-G98PRRLH9V');
    </script>
</head>

<body>
    <header>
        <nav>
            <ul class="menu-nav">
                <li><a href="index.html">Home</a></li>
                <li><a href="quem-somos.html">Quem somos</a></li>
                <li><a href="atletas.html">Atletas</a></li>
                <li><a href="jogos.html">Placares</a></li>
                <li><a href="ranking.html">Ranking</a></li>
                <li><a href="local.html">Local</a></li>
            </ul>
        </nav>
    </header>

    <main class="container">
        <img src="./img/peladeiros.png" alt="Logo Peladeiros" class="logo-flutuante">

        <h1 class="titulo-principal" id="titulo-ranking">Ranking Mensalistas</h1>
        <p class="intro">Confira a classifica√ß√£o detalhada de todos os nossos atletas.</p>

        <div class="ranking-controls">
            <button onclick="mudarRanking('total')" id="btn-total" class="btn-filtro ativo">Geral (Acumulado)</button>
            <button onclick="mudarRanking('mes')" id="btn-mes" class="btn-filtro">Mensal (Fevereiro)</button>
        </div>

        <section id="ranking-detalhado">
            <div style="overflow-x: auto;">
                <table class="tabela-ranking">
                    <thead>
                        <tr>
                            <th>Pos</th>
                            <th style="text-align: left; padding-left: 20px;">Atleta</th>
                            <th id="label-pontos">Pontos</th>
                        </tr>
                    </thead>
                    <tbody id="tabela-corpo">
                    </tbody>
                </table>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <a href="index.html" class="btn-local">Voltar para a Home</a>
            </div>
        </section>
    </main>

    <footer class="rodape-preto">
        <div class="social-links">
            <a href="https://www.instagram.com/peladeirosdefutevolei" target="_blank">
                <img src="./img/instagram.jpeg" alt="Instagram" class="icon">
            </a>
            <a href="https://youtube.com/@peladeirosdefutevolei" target="_blank">
                <img src="./img/youtube.png" alt="YouTube" class="icon">
            </a>
        </div>
        <p>&copy; 2026 Peladeiros de Futev√¥lei</p>
    </footer>

    <script src="dados_ranking.js"></script>
    <script>
        function mudarRanking(tipo) {
            const corpo = document.getElementById('tabela-corpo');
            const label = document.getElementById('label-pontos');
            const btnTotal = document.getElementById('btn-total');
            const btnMes = document.getElementById('btn-mes');
            const titulo = document.getElementById('titulo-ranking');

            // 1. ORDENAR: Primeiro por pontos (descendente) e depois por Nome (alfab√©tica)
            const rankingOrdenado = [...bancoDeDadosRanking].sort((a, b) => {
                if (b[tipo] !== a[tipo]) {
                    return b[tipo] - a[tipo];
                }
                return a.nome.localeCompare(b.nome); // Ordem alfab√©tica A-Z
            });

            const maiorPontuacao = rankingOrdenado[0][tipo];

            // 2. Atualizar visual
            if (tipo === 'total') {
                btnTotal.classList.add('ativo');
                btnMes.classList.remove('ativo');
                label.innerText = 'Total';
                titulo.innerText = 'Ranking Geral (Jan/Fev)';
            } else {
                btnMes.classList.add('ativo');
                btnTotal.classList.remove('ativo');
                label.innerText = 'Vit√≥rias (Fev)';
                titulo.innerText = 'Ranking Mensal (Fevereiro)';
            }

            // 3. Gerar as linhas com l√≥gica de posi√ß√£o empatada
            let posicaoExibida = 1;

            corpo.innerHTML = rankingOrdenado.map((atleta, index) => {
                // Se n√£o for o primeiro e a pontua√ß√£o for menor que o anterior, 
                // a posi√ß√£o pula para o n√∫mero do √≠ndice + 1
                if (index > 0 && atleta[tipo] < rankingOrdenado[index - 1][tipo]) {
                    posicaoExibida = index + 1;
                }

                const eLider = atleta[tipo] === maiorPontuacao;

                return `
                    <tr class="${eLider ? 'primeiro-lugar' : ''}">
                        <td>${posicaoExibida}¬∫</td>
                        <td style="text-align: left; padding-left: 20px;">
                            ${atleta.nome} ${eLider ? 'üèÜ' : ''}
                        </td>
                        <td><strong>${atleta[tipo]}</strong></td>
                    </tr>
                `;
            }).join('');
        }

        window.onload = () => mudarRanking('total');
    </script>
</body>

</html>